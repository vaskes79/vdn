# Создание заметки с временной меткой

## Описание
Пользователь может создать заметку, привязанную к текущему моменту просматриваемого видео. Заметка автоматически сохраняет время воспроизведения с учетом смещения.

## Сценарий использования

### Шаг 1: Просмотр видео
- Пользователь просматривает видео в проигрывателе
- Видео воспроизводится в левой части интерфейса

### Шаг 2: Создание заметки
- Пользователь находит интересный момент в видео
- Пользователь останавливает воспроизведение (или продолжает просмотр)
- Пользователь вводит текст заметки в поле "Note" в правой части интерфейса
- При вводе текста воспроизведение видео автоматически останавливается

### Шаг 3: Сохранение заметки
- Пользователь нажимает Enter или отправляет форму
- Происходит:
  1. Получается текущее время воспроизведения видео
  2. Вычитается временное смещение (`TIME_OFFSET`, по умолчанию 3 секунды)
  3. Создается объект заметки с:
     - `title` - текст заметки
     - `time` - время с учетом смещения
     - `url` - URL текущего видео
  4. Заметка сохраняется в базу данных (таблица `NOTES`)
  5. Форма очищается
  6. Список заметок обновляется
  7. Воспроизведение видео возобновляется

### Временное смещение
- По умолчанию используется смещение 3 секунды назад от текущего момента
- Это позволяет компенсировать задержку пользователя при создании заметки
- Значение можно изменить в настройках приложения

## Технические детали

### Компоненты
- `Notes/AddNoteForm.js` - форма добавления заметки
- Использует контекст `VdnAppContext` для доступа к проигрывателю и БД

### Методы
- `getCurrentTime()` - получение текущего времени видео из проигрывателя
- `db.addNote(noteItem)` - добавление заметки в таблицу `NOTES`

### Константы
- `AppSetup.TIME_OFFSET` - смещение времени (3 секунды)

### Состояние
- После создания заметки вызывается `update()` для обновления списка заметок
- Заметки фильтруются по URL текущего видео

